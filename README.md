# 📋 在线剪贴板 - 基于 Cloudflare wokers

一个基于 Cloudflare Workers + KV 构建的极简、安全、响应式在线剪贴板。

### 使用Cloudflare一键部署（下方按钮）

[![Deploy to Cloudflare Workers](https://deploy.workers.cloudflare.com/button)](https://deploy.workers.cloudflare.com/?url=https://github.com/Echozxc/Cloud-Clipboard)

---

## ✨ 核心特性

- **🚀 零门槛一键部署**：通过 Cloudflare 官方自动化流程，全自动创建 KV 空间并部署。
- **🔥 读即删（阅后即焚）**：内容首次查看后立即物理销毁，服务器不留备份。
- **🕒 精准时区 (UTC+8)**：时间显示强制锁定为**北京时间**，解决跨时区显示偏差问题。
- **📜 智能历史记录**：
    - **隐形同步**：自动实时检测本地记录在云端是否已失效。
    - **失效补偿**：失效记录自动变灰/变暗，并仅保留“删除”按钮，交互更清爽。
    - **全链路 ID**：从编辑预看、发布结果到阅读页面、历史条目，ID 标识全程追踪。
- **🛡️ 极致安全管理**：
    - **三步清除云端**：右上角管理员清除功能（风险警告 -> 密码校验 -> 最终确认），防止误删。
    - **彻底清理逻辑**：引入分页递归清理，确保成千上万条记录也能一键物理抹除。
    - **防误触系统**：清空标题、清空正文、清空历史等敏感操作均设有二次确认弹窗。
- **📱 响应式适配**：深度优化移动端体验，彻底解决 URL 框溢出及按钮遮挡问题。

---

## 🛠️ 自动化部署指南

点击页面顶部的 **Deploy to Cloudflare Workers** 按钮，按照以下流程操作：

1. **授权与克隆**：连接你的 GitHub 账号并 Fork 本仓库。
2. **配置 KV 空间**：在部署预览页面，点击 **"KV Namespaces"** 区域的 **"Create"** 按钮，系统将自动创建并绑定 `PASTE_KV`。
3. **自定义管理员密码 (重要)**：
   - 在部署页面的 **"Environment Variables"** 区域，找到 **`ADMIN_PASSWORD`** 选项。
   - 默认密码为 `admin`。**强烈建议在部署时直接修改为你自己的强密码**。
   - 部署完成后，若需再次修改，可在 Cloudflare 控制台的 `Settings -> Variables` 中更改并重新部署。
4. **即刻上线**：点击 **Deploy**，部署成功后即可获得你的专属剪贴板网址。

---

## 🌐 进阶推荐：绑定自定义域名

虽然 Cloudflare 提供免费的 `*.workers.dev` 域名，但在部分地区及办公网络下可能访问受限。**强烈建议绑定自有域名**以获得最佳稳定性：

1. 在 Cloudflare 项目管理页点击 **Settings** -> **Domains & Routes**。
2. 点击 **Add** -> **Custom Domain**。
3. 输入你在 Cloudflare 解析的域名（如 `paste.yourdomain.com`）。
4. 点击 **Set Custom Domain**，Cloudflare 会自动完成 SSL 证书申请与 DNS 解析。

---

## 📖 操作指引

- **发布内容**：
  - 支持输入可选标题。
  - 右下角实时显示即将生成的 **文本 ID**。
  - **发布后清空** 选项默认为开启，方便连续发布不同内容。
- **管理历史**：
  - **查看内容**：有效链接可点击查看（阅后即焚条目会有风险警示）。
  - **复制链接**：一键复制分享链接并伴有成功提示。
  - **批量工具**：
    - **一键撤销**：从云端批量删除本地历史中的所有有效链接。
    - **删除失效链接**：仅清理本地列表中已失效（变灰）的条目。
    - **清空历史**：仅清理本地浏览器的历史存储（不影响云端）。

---

## ⚙️ 环境变量参考

| 变量名           | 必填   | 默认值  | 说明                                        |
| :--------------- | :----- | :------ | :------------------------------------------ |
| `PASTE_KV`       | **是** | -       | KV 存储空间，部署流程中点击 Create 自动绑定 |
| `ADMIN_PASSWORD` | 否     | `admin` | 管理员清除云端数据库所需的授权密码          |

---

## 📂 项目结构

- `worker.js`: 核心逻辑代码，集成了前端界面与后端 API 路由。
- `wrangler.toml`: 自动化部署配置文件，预设了 KV 绑定及环境变量。